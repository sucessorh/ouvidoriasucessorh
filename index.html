<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canal de Integridade e Ouvidoria - Sucesso RH</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Poppins for titles, Inter for text -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-dev"></script>

    <!-- Custom Styles -->
    <style>
        :root {
            --azul-primario: #0B2D59; /* Azul escuro para textos e fundos */
            --azul-secundario: #1E63B3; /* Azul médio para botões e links */
            --verde-confianca: #059669; /* Verde para ícones de sucesso e confiança */
            --fundo-claro: #f8fafc; /* Fundo geral da página (slate-50) */
            --texto-principal: #1f2937; /* Cinza escuro para textos */
            --texto-secundario: #4b5563; /* Cinza médio para parágrafos */
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--texto-principal);
            background-color: var(--fundo-claro);
        }

        h1, h2, h3, h4, .font-title {
            font-family: 'Poppins', sans-serif;
        }
        
        .bg-azul-primario { background-color: var(--azul-primario); }
        
        .gradient-title {
            background: linear-gradient(90deg, var(--azul-secundario), var(--azul-primario));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--azul-secundario), var(--azul-primario));
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px 0 rgba(30, 99, 179, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 7px 20px 0 rgba(30, 99, 179, 0.4);
        }

        .modal-popup { animation: popup 0.3s ease-out forwards; }
        @keyframes popup {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
            border: 3px solid #f1f5f9;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-on-scroll {
            opacity: 0;
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .is-visible {
            opacity: 1;
            transform: none;
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        #inicio::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://i.postimg.cc/x8B9HCTS/busy-woman-doing-many-things-same-time.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            z-index: 1;
        }
        #inicio > div { position: relative; z-index: 2; }

        /* Carrossel */
        .carousel-track {
            animation: scroll 40s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(-282px * 7)); } /* (250px de largura + 32px de margem) * 7 cards */
        }
        .carousel-container:hover .carousel-track {
            animation-play-state: paused;
        }
    </style>
</head>
<body class="antialiased">

    <div id="global-banner" class="hidden fixed top-0 left-0 right-0 text-white text-center p-3 z-50 transition-all">
        <span id="global-banner-message"></span>
        <button onclick="this.parentElement.classList.add('hidden')" class="absolute top-1/2 right-4 -translate-y-1/2 font-bold">
            <i data-lucide="x"></i>
        </button>
    </div>

    <div id="ouvidoria-view">
        <header class="bg-white/90 backdrop-blur-lg shadow-md sticky top-0 z-40">
            <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
                <a href="#" class="flex-shrink-0">
                    <img src="https://i.postimg.cc/wv5wQfzB/logo-sucesso-rh.png" alt="Logotipo Sucesso RH" class="h-9 w-auto">
                </a>
                <div class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <a href="#sobre" class="text-gray-600 hover:text-azul-secundario transition-colors">Sobre o Canal</a>
                    <a href="#como-funciona" class="text-gray-600 hover:text-azul-secundario transition-colors">Como Funciona</a>
                    <a href="#faq" class="text-gray-600 hover:text-azul-secundario transition-colors">FAQ</a>
                </div>
                <button id="open-admin-login-btn-nav" class="text-sm font-semibold text-gray-600 hover:text-azul-secundario transition-colors border border-gray-300 px-4 py-2 rounded-full">
                    Acesso Restrito
                </button>
            </nav>
        </header>

        <main>
            <!-- Seção 1: Hero Section -->
            <section id="inicio" class="relative bg-white pt-20 pb-24 md:pt-28 md:pb-32 overflow-hidden">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-4xl md:text-6xl font-bold gradient-title animate-on-scroll">Bem-vindo à Ouvidoria Sucesso RH</h1>
                    <p class="mt-6 max-w-3xl mx-auto text-lg text-texto-secundario animate-on-scroll" style="animation-delay: 0.2s;">
                        Um canal dedicado a você. Acreditamos que ouvir suas opiniões, sugestões e preocupações é o caminho para aprimorar continuamente nossas ações e construir um ambiente de trabalho cada vez melhor.
                    </p>
                    <div class="mt-10 animate-on-scroll" style="animation-delay: 0.4s;">
                        <button class="open-report-modal-btn btn-primary text-white font-bold text-lg px-8 py-4 rounded-full">
                            Fazer uma Manifestação
                        </button>
                    </div>
                </div>
            </section>

            <!-- Seção 2: Sobre o Canal (FUNDO AZUL) -->
            <section id="sobre" class="py-20 bg-azul-primario text-white">
                <div class="container mx-auto px-6 text-center">
                    <i data-lucide="message-circle-heart" class="w-16 h-16 text-blue-300 mb-4 mx-auto"></i>
                    <h2 class="text-4xl font-bold text-white mb-4">Um Canal Aberto e Seguro</h2>
                    <p class="max-w-3xl mx-auto text-lg text-blue-200">
                        A Ouvidoria Sucesso RH é mais do que um formulário. É o nosso compromisso com a transparência e a escuta ativa. Este espaço foi projetado para ser simples, rápido e, acima de tudo, seguro, para que você tenha total confiança ao compartilhar sua perspectiva conosco.
                    </p>
                </div>
            </section>
            
            <!-- Seção 3: Nosso Compromisso -->
            <section id="compromisso" class="py-24">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16">
                         <div class="flex justify-center items-center gap-4 mb-4">
                            <h2 class="text-4xl font-bold gradient-title">Nosso Compromisso com Você</h2>
                        </div>
                        <p class="mt-4 text-lg text-texto-secundario max-w-2xl mx-auto">Sua confiança é o nosso bem mais valioso. Por isso, nosso canal é guiado por três pilares essenciais:</p>
                    </div>
                    <div class="grid md:grid-cols-3 gap-12">
                         <div class="text-center animate-on-scroll">
                            <i data-lucide="shield-off" class="w-12 h-12 text-azul-secundario mb-4 mx-auto"></i>
                            <h3 class="text-2xl font-bold mb-2 text-azul-primario">Sigilo Absoluto</h3>
                            <p class="text-texto-secundario">Garantimos o anonimato e a confidencialidade. Sua identidade será preservada, proporcionando a liberdade para se expressar com segurança.</p>
                        </div>
                        <div class="text-center animate-on-scroll" style="animation-delay: 0.2s;">
                            <i data-lucide="scale" class="w-12 h-12 text-azul-secundario mb-4 mx-auto"></i>
                            <h3 class="text-2xl font-bold mb-2 text-azul-primario">Análise Imparcial</h3>
                            <p class="text-texto-secundario">Todos os relatos são apurados por uma equipe dedicada e independente, assegurando uma investigação justa, cuidadosa e sem conflitos de interesse.</p>
                        </div>
                        <div class="text-center animate-on-scroll" style="animation-delay: 0.4s;">
                            <i data-lucide="user-check" class="w-12 h-12 text-azul-secundario mb-4 mx-auto"></i>
                            <h3 class="text-2xl font-bold mb-2 text-azul-primario">Resposta Oportuna</h3>
                            <p class="text-texto-secundario">Nossa equipe se compromete a fornecer uma resposta transparente e eficaz dentro do menor prazo possível para cada manifestação.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Seção 4: Como Funciona (FUNDO AZUL) -->
            <section id="como-funciona" class="py-20 bg-azul-primario text-white">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16">
                        <div class="flex justify-center items-center gap-4 mb-4">
                            <i data-lucide="workflow" class="w-10 h-10 text-blue-300"></i>
                            <h2 class="text-4xl font-bold text-white">Como Funciona</h2>
                        </div>
                        <p class="mt-4 text-lg text-blue-200 max-w-2xl mx-auto">Um processo claro e direto para garantir que sua voz seja ouvida.</p>
                    </div>
                    <div class="grid md:grid-cols-3 gap-8 text-center">
                        <div class="animate-on-scroll">
                            <div class="bg-white/10 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative">
                                <span class="text-4xl font-bold">1</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-2 text-white">Faça o Relato</h3>
                            <p class="text-blue-200">Utilize o formulário seguro para descrever a situação com o máximo de detalhes. Lembre-se: a identificação é opcional.</p>
                        </div>
                        <div class="animate-on-scroll" style="animation-delay: 0.2s;">
                            <div class="bg-white/10 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative">
                                <span class="text-4xl font-bold">2</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-2 text-white">Análise e Apuração</h3>
                            <p class="text-blue-200">Nossa equipe de compliance recebe o caso, garante a proteção dos dados e inicia uma apuração cuidadosa e imparcial.</p>
                        </div>
                        <div class="animate-on-scroll" style="animation-delay: 0.4s;">
                            <div class="bg-white/10 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative">
                                <span class="text-4xl font-bold">3</span>
                            </div>
                            <h3 class="text-2xl font-bold mb-2 text-white">Resolução e Feedback</h3>
                            <p class="text-blue-200">As medidas apropriadas são tomadas. Se você forneceu um contato, receberá um retorno sobre a conclusão do seu caso.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Seção Mini Cartilha (Carrossel) -->
            <section id="cartilha" class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <div class="flex justify-center items-center gap-4 mb-4">
                        <i data-lucide="book-open-check" class="w-10 h-10 text-azul-primario"></i>
                        <h2 class="text-4xl font-bold gradient-title">Pílulas de Conscientização</h2>
                    </div>
                    <p class="mt-4 text-lg text-texto-secundario max-w-2xl mx-auto mb-12">Informação é a melhor ferramenta de prevenção. Juntos, criamos um ambiente mais respeitoso.</p>
                </div>
                <div class="w-full inline-flex flex-nowrap overflow-hidden [mask-image:_linear-gradient(to_right,transparent_0,_black_128px,_black_calc(100%-200px),transparent_100%)] carousel-container">
                    <ul class="flex items-center justify-center md:justify-start [&_li]:mx-4 [&_img]:max-w-none carousel-track">
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="shield-check" class="w-10 h-10 text-verde-confianca mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Respeito é a Base</h4>
                            <p class="text-sm text-texto-secundario mt-1">Toda conduta abusiva, por gestos, palavras ou atitudes, que ameace a integridade de alguém, não é tolerada.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="message-square-x" class="w-10 h-10 text-red-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Assédio Moral</h4>
                            <p class="text-sm text-texto-secundario mt-1">É a exposição repetitiva a situações humilhantes, que degradam o ambiente de trabalho.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="hand-heart" class="w-10 h-10 text-pink-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Assédio Sexual</h4>
                            <p class="text-sm text-texto-secundario mt-1">Qualquer tipo de constrangimento ou "cantada" com o objetivo de obter vantagem sexual não é bem-vindo.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="megaphone" class="w-10 h-10 text-azul-secundario mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Sua Atitude Importa</h4>
                            <p class="text-sm text-texto-secundario mt-1">Seja vítima ou testemunha, sua comunicação é fundamental. Não se cale. Use este canal.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="scale" class="w-10 h-10 text-gray-600 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Hierarquia e Assédio</h4>
                            <p class="text-sm text-texto-secundario mt-1">O assédio pode ocorrer entre chefe e subordinado, entre colegas, ou até de subordinados para o chefe.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="lightbulb" class="w-10 h-10 text-yellow-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Não é Assédio</h4>
                            <p class="text-sm text-texto-secundario mt-1">Exigir cumprimento de metas, feedbacks construtivos e organização do trabalho são práticas de gestão.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="trending-up" class="w-10 h-10 text-green-600 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Crescimento Contínuo</h4>
                            <p class="text-sm text-texto-secundario mt-1">Cada relato é uma oportunidade de melhoria para construirmos, juntos, um ambiente de trabalho melhor.</p>
                        </li>
                        <!-- Repetição para o loop -->
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="shield-check" class="w-10 h-10 text-verde-confianca mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Respeito é a Base</h4>
                            <p class="text-sm text-texto-secundario mt-1">Toda conduta abusiva, por gestos, palavras ou atitudes, que ameace a integridade de alguém, não é tolerada.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="message-square-x" class="w-10 h-10 text-red-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Assédio Moral</h4>
                            <p class="text-sm text-texto-secundario mt-1">É a exposição repetitiva a situações humilhantes, que degradam o ambiente de trabalho.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="hand-heart" class="w-10 h-10 text-pink-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Assédio Sexual</h4>
                            <p class="text-sm text-texto-secundario mt-1">Qualquer tipo de constrangimento ou "cantada" com o objetivo de obter vantagem sexual não é bem-vindo.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="megaphone" class="w-10 h-10 text-azul-secundario mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Sua Atitude Importa</h4>
                            <p class="text-sm text-texto-secundario mt-1">Seja vítima ou testemunha, sua comunicação é fundamental. Não se cale. Use este canal.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="scale" class="w-10 h-10 text-gray-600 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Hierarquia e Assédio</h4>
                            <p class="text-sm text-texto-secundario mt-1">O assédio pode ocorrer entre chefe e subordinado, entre colegas, ou até de subordinados para o chefe.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="lightbulb" class="w-10 h-10 text-yellow-500 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Não é Assédio</h4>
                            <p class="text-sm text-texto-secundario mt-1">Exigir cumprimento de metas, feedbacks construtivos e organização do trabalho são práticas de gestão.</p>
                        </li>
                        <li class="flex-shrink-0 w-[250px] bg-slate-100 p-6 rounded-lg shadow-md">
                            <i data-lucide="trending-up" class="w-10 h-10 text-green-600 mb-3"></i>
                            <h4 class="font-bold text-lg text-azul-primario">Crescimento Contínuo</h4>
                            <p class="text-sm text-texto-secundario mt-1">Cada relato é uma oportunidade de melhoria para construirmos, juntos, um ambiente de trabalho melhor.</p>
                        </li>
                    </ul>
                </div>
            </section>

            <section id="faq" class="py-20 bg-azul-primario text-white">
                <div class="container mx-auto px-6 max-w-3xl">
                    <div class="flex justify-center items-center gap-4 mb-12">
                        <i data-lucide="help-circle" class="w-10 h-10 text-blue-300"></i>
                        <h2 class="text-4xl font-bold text-center text-white">Dúvidas Frequentes</h2>
                    </div>
                    <div class="space-y-4">
                        <details class="bg-white/10 p-6 rounded-lg">
                            <summary class="font-semibold text-lg cursor-pointer text-white">Preciso ter certeza absoluta para fazer um relato?</summary>
                            <p class="mt-4 text-blue-200">Não. Se você tem uma suspeita razoável e de boa-fé, pode e deve fazer o relato. A apuração é responsabilidade da nossa equipe. O importante é não se omitir.</p>
                        </details>
                        <details class="bg-white/10 p-6 rounded-lg">
                            <summary class="font-semibold text-lg cursor-pointer text-white">O que acontece se um relato for falso?</summary>
                            <p class="mt-4 text-blue-200">Relatos feitos de má-fé, com a intenção deliberada de prejudicar alguém, não são protegidos pela política de não retaliação e podem estar sujeitos a medidas disciplinares.</p>
                        </details>
                        <details class="bg-white/10 p-6 rounded-lg">
                            <summary class="font-semibold text-lg cursor-pointer text-white">Posso editar meu relato ou adicionar mais informações depois?</summary>
                            <p class="mt-4 text-blue-200">Uma vez enviado, o relato não pode ser editado. No entanto, você pode fazer um novo relato mencionando o protocolo do anterior e adicionando as novas informações.</p>
                        </details>
                    </div>
                </div>
            </section>
        </main>

        <footer class="bg-azul-primario text-white border-t border-white/10">
            <div class="container mx-auto px-6 py-12 text-center">
                <p class="font-semibold text-lg mb-2">Um ambiente de trabalho íntegro é responsabilidade de todos.</p>
                <p class="text-blue-200">© 2025 Sucesso RH. Todos os direitos reservados.</p>
                <div class="mt-6 flex justify-center space-x-6">
                    <a href="#" class="text-blue-200 hover:text-white"><i data-lucide="linkedin"></i></a>
                    <a href="#" class="text-blue-200 hover:text-white"><i data-lucide="instagram"></i></a>
                    <a href="#" class="text-blue-200 hover:text-white">Política de Privacidade</a>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- =================================================================== -->
    <!-- ====                  PAINEL DO OUVIDOR (ADMIN)                 ==== -->
    <!-- =================================================================== -->
    <div id="admin-view" style="display: none;" class="min-h-screen bg-slate-100 p-4 sm:p-6 lg:p-8">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                <h1 class="text-3xl font-bold text-slate-800">Painel da Ouvidoria</h1>
                <button id="logout-btn" class="font-semibold text-azul-secundario hover:text-azul-primario transition-colors flex items-center gap-2">
                    <i data-lucide="log-out" class="w-5 h-5"></i> Sair
                </button>
            </div>
            
            <div class="bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-wrap gap-4 items-end">
                <div class="flex-1 min-w-[150px]">
                    <label for="filter-status" class="text-sm font-medium text-gray-600">Filtrar por Status</label>
                    <select id="filter-status" class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                        <option value="Todos">Todos</option>
                        <option value="Recebido">Recebido</option>
                        <option value="Em Análise">Em Análise</option>
                        <option value="Concluído">Concluído</option>
                    </select>
                </div>
                <div class="flex-1 min-w-[150px]">
                    <label for="search-reports" class="text-sm font-medium text-gray-600">Buscar no Relato</label>
                    <input type="text" id="search-reports" placeholder="Digite palavras-chave..." class="mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Protocolo</th>
                                <th scope="col" class="px-6 py-3">Data</th>
                                <th scope="col" class="px-6 py-3">Tipo</th>
                                <th scope="col" class="px-6 py-3">Status</th>
                                <th scope="col" class="px-6 py-3">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="reports-table-body"></tbody>
                    </table>
                </div>
                 <div id="no-reports-message" class="hidden text-center py-12 text-gray-500">
                    <i data-lucide="inbox" class="w-16 h-16 mx-auto mb-4 text-gray-300"></i>
                    <p>Nenhum relato encontrado.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- =================================================================== -->
    <!-- ====                       MODAIS                              ==== -->
    <!-- =================================================================== -->

    <div id="report-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
        <form id="report-form" class="modal-popup bg-white p-8 md:p-10 rounded-2xl shadow-xl border border-gray-100 space-y-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto custom-scrollbar">
            <div class="flex justify-between items-start">
                <h2 class="text-3xl font-bold text-azul-primario">Formulário de Relato</h2>
                <button type="button" class="close-modal-btn text-gray-400 hover:text-gray-700">
                    <i data-lucide="x-circle" class="w-7 h-7"></i>
                </button>
            </div>
            
            <div class="bg-blue-50 border-l-4 border-blue-400 text-blue-800 p-4 rounded-r-lg" role="alert">
                <p class="font-bold">Anonimato</p>
                <p class="text-sm">Deixar os campos de identificação em branco garante seu anonimato. Se você se identificar, seus dados serão mantidos em sigilo pela Ouvidoria.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="report-name" class="font-semibold text-gray-700">Seu nome (opcional)</label>
                    <input type="text" id="report-name" placeholder="Deixe em branco para anonimato" class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                </div>
                <div>
                    <label for="report-email" class="font-semibold text-gray-700">Seu e-mail para contato (opcional)</label>
                    <input type="email" id="report-email" placeholder="Para receber atualizações do caso" class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                </div>
            </div>
            
            <div>
                <label for="report-type" class="font-semibold text-gray-700">Tipo de Manifestação <span class="text-red-500">*</span></label>
                <select id="report-type" required class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                    <option value="">Selecione o tipo...</option>
                    <option>Denúncia (Assédio, Discriminação, Fraude, etc.)</option>
                    <option>Reclamação (Processos, Condições de trabalho)</option>
                    <option>Sugestão de Melhoria</option>
                    <option>Dúvida sobre Ética e Conduta</option>
                    <option>Outro</option>
                </select>
            </div>

            <div>
                <label for="report-details" class="font-semibold text-gray-700">Descrição detalhada do fato <span class="text-red-500">*</span></label>
                <textarea id="report-details" rows="6" required placeholder="Descreva o que aconteceu, quando, onde, quem são os envolvidos e por que você está fazendo este relato. Quanto mais detalhes, melhor a apuração." class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-azul-secundario"></textarea>
            </div>
            
            <div class="flex justify-end gap-4 items-center pt-4 border-t border-gray-200">
                <button type="button" class="close-modal-btn font-semibold text-gray-600 hover:text-gray-900">Cancelar</button>
                <button type="submit" class="btn-primary text-white text-lg font-semibold px-8 py-2 rounded-full disabled:opacity-50 disabled:cursor-wait flex items-center justify-center gap-2">
                    <span class="spinner hidden w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                    Enviar Relato
                </button>
            </div>
        </form>
    </div>
    
    <div id="admin-login-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
        <form id="admin-login-form" class="modal-popup bg-white rounded-2xl shadow-2xl w-full max-w-sm">
            <div class="p-8">
                <h2 class="text-2xl font-bold text-center text-azul-primario">Acesso do Ouvidor</h2>
                <p class="text-slate-500 text-center mt-2">Insira a senha de acesso.</p>
                <div class="mt-6">
                    <label for="admin-password" class="font-semibold text-slate-700 block mb-1">Senha</label>
                    <input type="password" id="admin-password" required class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-azul-secundario">
                    <p id="admin-error" class="text-red-500 text-sm mt-1 hidden">Senha incorreta.</p>
                </div>
                <div class="mt-6 flex items-center justify-end gap-4">
                    <button type="button" class="close-modal-btn font-semibold text-slate-600 hover:text-slate-800">Cancelar</button>
                    <button type="submit" class="btn-primary text-white font-bold px-6 py-2 rounded-lg">Entrar</button>
                </div>
            </div>
        </form>
    </div>

    <div id="view-report-modal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
        <div id="view-report-content" class="modal-popup bg-white p-8 md:p-10 rounded-2xl shadow-xl border border-gray-100 w-full max-w-3xl max-h-[90vh] overflow-y-auto custom-scrollbar"></div>
    </div>

    <!-- =================================================================== -->
    <!-- ====                  JAVASCRIPT & FIREBASE                    ==== -->
    <!-- =================================================================== -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyB6lYQHHWvDzQEq4BWBKs0HIuavvWysqk0",
          authDomain: "ouvidoriasucessorh.firebaseapp.com",
          projectId: "ouvidoriasucessorh",
          storageBucket: "ouvidoriasucessorh.firebasestorage.app",
          messagingSenderId: "49858759404",
          appId: "1:49858759404:web:e37c4b5cea3b9dd2cb33c9",
          measurementId: "G-M9SBW7QTRX"
        };
        
        function initializeAppLogic() {
            const ouvidoriaView = document.getElementById('ouvidoria-view');
            const adminView = document.getElementById('admin-view');
            const reportModal = document.getElementById('report-modal');
            const adminLoginModal = document.getElementById('admin-login-modal');
            const viewReportModal = document.getElementById('view-report-modal');
            const reportForm = document.getElementById('report-form');
            const adminLoginForm = document.getElementById('admin-login-form');
            const globalBanner = document.getElementById('global-banner');
            const globalBannerMessage = document.getElementById('global-banner-message');

            const isConfigured = firebaseConfig.apiKey && firebaseConfig.apiKey.startsWith("AIza");
            let db, auth;
            let allReports = [];
            let unsubscribeReports; 

            function showBanner(message, type = 'error') {
                globalBannerMessage.textContent = message;
                globalBanner.classList.remove('hidden', 'bg-red-600', 'bg-green-600');
                globalBanner.classList.add(type === 'success' ? 'bg-green-600' : 'bg-red-600');
                if (typeof lucide !== 'undefined') lucide.createIcons();
                setTimeout(() => globalBanner.classList.add('hidden'), 5000);
            }

            if (isConfigured) {
                try {
                    const app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);
                    signInAnonymously(auth).catch((error) => {
                        console.error("Anonymous sign-in failed:", error);
                        showBanner("Falha na autenticação. Verifique as regras de segurança do Firebase.");
                    });
                } catch (e) {
                    console.error("Firebase initialization error:", e);
                    showBanner("Erro ao inicializar o Firebase. Verifique sua configuração.");
                }
            } else {
                 showBanner("CONFIGURAÇÃO NECESSÁRIA: Insira suas credenciais do Firebase no código.");
            }
            
            if (typeof lucide !== 'undefined') lucide.createIcons(); 

            const openModal = (modal) => modal.classList.remove('hidden');
            const closeModal = (modal) => modal.classList.add('hidden');

            document.querySelectorAll('.open-report-modal-btn').forEach(btn => btn.addEventListener('click', () => openModal(reportModal)));
            document.getElementById('open-admin-login-btn-nav').addEventListener('click', () => openModal(adminLoginModal));
            
            document.querySelectorAll('.close-modal-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const modal = e.target.closest('.fixed');
                    if(modal) closeModal(modal);
                });
            });

            reportForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!isConfigured) return showBanner("O formulário não pode ser enviado sem a configuração do Firebase.");

                const submitBtn = reportForm.querySelector('button[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.querySelector('.spinner').classList.remove('hidden');

                const formData = {
                    nome: document.getElementById('report-name').value.trim() || "Anônimo",
                    email: document.getElementById('report-email').value.trim() || "Não informado",
                    tipo: document.getElementById('report-type').value,
                    detalhes: document.getElementById('report-details').value.trim(),
                    status: 'Recebido',
                    createdAt: serverTimestamp()
                };

                try {
                    const docRef = await addDoc(collection(db, "ouvidoria_relatos"), formData);
                    closeModal(reportModal);
                    reportForm.reset();
                    showBanner(`Seu relato foi enviado com sucesso! Protocolo: ${docRef.id}`, 'success');
                } catch (error) {
                    console.error("Error adding document: ", error);
                    showBanner("Ocorreu um erro ao enviar seu relato. Tente novamente.");
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.querySelector('.spinner').classList.add('hidden');
                }
            });

            adminLoginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const password = document.getElementById('admin-password').value;
                const errorMsg = document.getElementById('admin-error');
                if (password === 'OuvidorRH@2025') {
                    ouvidoriaView.style.display = 'none';
                    adminView.style.display = 'block';
                    closeModal(adminLoginModal);
                    adminLoginForm.reset();
                    errorMsg.classList.add('hidden');
                    initializeAdminDashboard();
                } else {
                    errorMsg.classList.remove('hidden');
                }
            });

            document.getElementById('logout-btn').addEventListener('click', () => {
                if (unsubscribeReports) unsubscribeReports();
                ouvidoriaView.style.display = 'block';
                adminView.style.display = 'none';
            });

            function initializeAdminDashboard() {
                if (!isConfigured) return;
                
                const reportsCollection = collection(db, "ouvidoria_relatos");
                unsubscribeReports = onSnapshot(reportsCollection, (snapshot) => {
                    allReports = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    renderReportsTable();
                });

                document.getElementById('filter-status').addEventListener('input', renderReportsTable);
                document.getElementById('search-reports').addEventListener('input', renderReportsTable);
            }

            function renderReportsTable() {
                const tbody = document.getElementById('reports-table-body');
                const noReportsMsg = document.getElementById('no-reports-message');
                const statusFilter = document.getElementById('filter-status').value;
                const searchTerm = document.getElementById('search-reports').value.toLowerCase();

                const filteredReports = allReports.filter(report => {
                    const statusMatch = statusFilter === 'Todos' || report.status === statusFilter;
                    const searchMatch = !searchTerm || (report.detalhes && report.detalhes.toLowerCase().includes(searchTerm)) || report.id.toLowerCase().includes(searchTerm);
                    return statusMatch && searchMatch;
                }).sort((a,b) => (b.createdAt?.toMillis() || 0) - (a.createdAt?.toMillis() || 0));

                if (filteredReports.length === 0) {
                    tbody.innerHTML = '';
                    noReportsMsg.classList.remove('hidden');
                } else {
                    noReportsMsg.classList.add('hidden');
                    tbody.innerHTML = filteredReports.map(report => `
                        <tr class="bg-white border-b hover:bg-gray-50">
                            <td class="px-6 py-4 font-mono text-xs">${report.id}</td>
                            <td class="px-6 py-4">${report.createdAt ? report.createdAt.toDate().toLocaleDateString('pt-BR') : 'N/A'}</td>
                            <td class="px-6 py-4">${report.tipo}</td>
                            <td class="px-6 py-4">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(report.status)}">
                                    ${report.status}
                                </span>
                            </td>
                            <td class="px-6 py-4">
                                <button class="view-report-btn text-blue-600 hover:underline" data-id="${report.id}">Ver Detalhes</button>
                            </td>
                        </tr>
                    `).join('');
                }
                if (typeof lucide !== 'undefined') lucide.createIcons();
            }
            
            function getStatusColor(status) {
                switch(status) {
                    case 'Recebido': return 'bg-blue-100 text-blue-800';
                    case 'Em Análise': return 'bg-yellow-100 text-yellow-800';
                    case 'Concluído': return 'bg-green-100 text-green-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            }

            document.getElementById('reports-table-body').addEventListener('click', async (e) => {
                if (e.target.classList.contains('view-report-btn')) {
                    const reportId = e.target.dataset.id;
                    const reportDoc = await getDoc(doc(db, "ouvidoria_relatos", reportId));
                    if (reportDoc.exists()) {
                        displayReportDetails(reportId, reportDoc.data());
                        openModal(viewReportModal);
                    }
                }
            });

            function displayReportDetails(id, data) {
                const contentDiv = document.getElementById('view-report-content');
                contentDiv.innerHTML = `
                    <div class="flex justify-between items-start mb-6">
                         <div>
                            <h3 class="text-2xl font-bold text-azul-primario">Detalhes do Relato</h3>
                            <p class="text-sm text-gray-500 font-mono mt-1">Protocolo: ${id}</p>
                         </div>
                         <button class="close-modal-btn text-gray-400 hover:text-gray-700">
                            <i data-lucide="x-circle" class="w-7 h-7"></i>
                         </button>
                    </div>
                    <div class="space-y-4">
                        <div><p class="text-sm font-semibold text-gray-500">Data</p><p>${data.createdAt ? data.createdAt.toDate().toLocaleString('pt-BR') : 'N/A'}</p></div>
                        <div><p class="text-sm font-semibold text-gray-500">Identificação</p><p><strong>Nome:</strong> ${data.nome} | <strong>Email:</strong> ${data.email}</p></div>
                        <div><p class="text-sm font-semibold text-gray-500">Tipo</p><p>${data.tipo}</p></div>
                        <div class="bg-gray-50 p-4 rounded-lg"><p class="text-sm font-semibold text-gray-500">Descrição</p><p class="mt-1 whitespace-pre-wrap">${data.detalhes}</p></div>
                        <div>
                            <label for="status-update" class="text-sm font-semibold text-gray-500">Atualizar Status</label>
                            <div class="flex gap-4 mt-2">
                                <select id="status-update" class="flex-grow block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="Recebido" ${data.status === 'Recebido' ? 'selected' : ''}>Recebido</option>
                                    <option value="Em Análise" ${data.status === 'Em Análise' ? 'selected' : ''}>Em Análise</option>
                                    <option value="Concluído" ${data.status === 'Concluído' ? 'selected' : ''}>Concluído</option>
                                </select>
                                <button id="save-status-btn" data-id="${id}" class="btn-primary text-white font-semibold px-4 py-2 rounded-lg">Salvar</button>
                            </div>
                        </div>
                    </div>
                `;
                contentDiv.querySelector('.close-modal-btn').addEventListener('click', () => closeModal(viewReportModal));
                if (typeof lucide !== 'undefined') lucide.createIcons();

                document.getElementById('save-status-btn').addEventListener('click', async (e) => {
                    const reportId = e.target.dataset.id;
                    const newStatus = document.getElementById('status-update').value;
                    const reportRef = doc(db, "ouvidoria_relatos", reportId);
                    try {
                        await updateDoc(reportRef, { status: newStatus });
                        showBanner('Status atualizado com sucesso!', 'success');
                        closeModal(viewReportModal);
                    } catch (error) {
                        console.error("Error updating status: ", error);
                        showBanner('Erro ao atualizar o status.');
                    }
                });
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        }
        
        document.addEventListener('DOMContentLoaded', initializeAppLogic);
    </script>
</body>
</html>
